(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},29:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(21),c=a.n(o),r=(a(29),a(1)),i=a(4),s=a(2),m=a(3),u=a.n(m),d=function(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useState)(""),o=Object(r.a)(a,2),c=o[0],m=o[1],d=Object(n.useState)([]),p=Object(r.a)(d,2),f=p[0],h=p[1],g=Object(n.useContext)(k),E=g.state,y=g.dispatch,v=Object(i.f)();Object(n.useEffect)((function(){u.a.Modal.init(e.current),u.a.Sidenav.init(t.current,{draggable:!0})}),[]);var b=function(){return E?[l.a.createElement("li",{key:"1"},l.a.createElement("i",{onClick:function(){return u.a.Sidenav.getInstance(t.current).close()},"data-target":"modal1",className:"material-icons modal-trigger",style:{color:"black",cursor:"pointer"}},"search")),l.a.createElement("li",{key:"2"},l.a.createElement(s.b,{to:"/myfeed",onClick:function(){return u.a.Sidenav.getInstance(t.current).close()}},"My Feed")),l.a.createElement("li",{key:"3"},l.a.createElement(s.b,{to:"/profile",onClick:function(){return u.a.Sidenav.getInstance(t.current).close()}},"Profile")),l.a.createElement("li",{key:"4"},l.a.createElement(s.b,{to:"/create-post",onClick:function(){return u.a.Sidenav.getInstance(t.current).close()}},"Create Post")),l.a.createElement("li",{key:"5"},l.a.createElement("button",{className:"btn ",onClick:function(){localStorage.clear(),y({type:"CLEAR"}),u.a.Sidenav.getInstance(t.current).close(),u.a.toast({html:"Logged out Successfully",classes:"#43a047 green darken-1"}),v.push("/signin")}}," Logout "))]:[l.a.createElement("li",{key:"6"},l.a.createElement(s.b,{to:"/signin",onClick:function(){return u.a.Sidenav.getInstance(t.current).close()}},"Signin")),l.a.createElement("li",{key:"7"},l.a.createElement(s.b,{to:"/signup",onClick:function(){return u.a.Sidenav.getInstance(t.current).close()}},"Signup"))]};return l.a.createElement("div",null,l.a.createElement("div",{className:"navbar-fixed"},l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper white"},l.a.createElement(s.b,{to:E?"/":"/signin",className:"brand-logo myfont "},"Connect"),l.a.createElement(s.b,{to:"",className:"sidenav-trigger","data-target":"slide-out"},l.a.createElement("i",{className:"material-icons"},"menu")),l.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down "},b())),l.a.createElement("div",{id:"modal1",className:"modal",ref:e,style:{color:"black"}},l.a.createElement("div",{className:"modal-content"},l.a.createElement("input",{type:"text",placeholder:"Search users",value:c,onChange:function(e){return t=e.target.value,m(t),void fetch("/users/search-users",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then((function(e){return e.json()})).then((function(e){h(e.users)})).catch((function(e){return console.log(e)}));var t},autoFocus:!0}),l.a.createElement("ul",{className:"collection"},f.map((function(t){return l.a.createElement(s.b,{to:t._id!==(E?E._id:"0")?"/profile/"+t._id:"/profile",onClick:function(){u.a.Modal.getInstance(e.current).close(),m("")}},l.a.createElement("li",{className:"collection-item"},l.a.createElement("div",{style:{float:"left",padding:"10px"}},l.a.createElement("img",{src:t.pic,style:{width:"50px",height:"50px",borderRadius:"50%"}})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement("h6",null,t.name),l.a.createElement("h6",null,t.email))))})))),l.a.createElement("div",{className:"modal-footer"},l.a.createElement("button",{className:"modal-close waves-effect waves-green btn-flat",onClick:function(){return m("")}},"Close"))))),l.a.createElement("ul",{className:"sidenav",id:"slide-out",ref:t},l.a.createElement("li",null,l.a.createElement("i",{style:{cursor:"pointer",float:"right",margin:"10px"},className:"material-icons sidenav-close"},"close")),b()))},p=function(){var e=Object(n.useContext)(k),t=e.state;e.dispatch;return l.a.createElement(l.a.Fragment,null,t?l.a.createElement("footer",{className:"myfooter show-on-medium-and-down hide-on-large-only"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row myrow"},l.a.createElement(s.b,{className:"flink waves-effect waves-teal",to:"/"},l.a.createElement("i",{className:"material-icons"},"home")),l.a.createElement(s.b,{className:"flink waves-effect waves-teal",to:"/"},l.a.createElement("i",{"data-target":"modal1",className:"material-icons modal-trigger"},"search")),l.a.createElement(s.b,{className:"flink waves-effect waves-teal",to:"/create-post"},l.a.createElement("i",{className:"material-icons"},"add_a_photo")),l.a.createElement(s.b,{className:"flink waves-effect waves-teal",to:"/myfeed"},l.a.createElement("i",{className:"material-icons"},"rss_feed")),l.a.createElement(s.b,{className:"flink waves-effect waves-teal",to:"/profile"},l.a.createElement("i",{className:"material-icons"},"account_circle"))))):"")},f=(a(34),a(15)),h=function(){var e=Object(n.useState)(void 0),t=Object(r.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(k),i=c.state,m=c.dispatch;Object(n.useEffect)((function(){fetch("/posts/all",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),o(e)}))}),[]);return l.a.createElement(l.a.Fragment,null,a?l.a.createElement("div",{className:"home"},a.map((function(e){return l.a.createElement("div",{className:"card home-card",key:e._id},l.a.createElement("div",null,l.a.createElement("div",{style:{float:"left",padding:"10px"}},l.a.createElement(s.b,{to:e.postedBy._id==i._id?"/profile":"/profile/"+e.postedBy._id},l.a.createElement("img",{src:e.postedBy.pic,style:{width:"30px",height:"30px",borderRadius:"50%"}}))),l.a.createElement("div",{style:{float:"left"}},l.a.createElement("div",{style:{fontSize:"1rem",lineHeight:"110%",padding:"2px",fontWeight:"600",marginTop:"5px"}},e.postedBy.name),l.a.createElement("div",{style:{fontSize:"1rem",lineHeight:"110%",padding:"2px"}},f(e.createdAt).utcOffset("+05:30").fromNow()," ",l.a.createElement("i",{className:"tiny material-icons"},"public"))),l.a.createElement("div",null,e.postedBy._id==i._id&&l.a.createElement("span",{style:{float:"right",marginTop:"10px"}},l.a.createElement(s.b,{style:{float:"right"},to:"/update-post/"+e._id},l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"}},"edit")),l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/posts/deletepost/".concat(t),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.filter((function(t){return t._id!==e._id}));o(t),u.a.toast({html:"Deleted Successfully",classes:"#43a047 green darken-1"})}))}},"delete")))),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:e.photo})),l.a.createElement("div",{className:"card-content"},i&&i.favourites.includes(e._id)?l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/users/removefromfav",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){m({type:"UPDATEFAV",payload:{favourites:e.favourites}}),localStorage.setItem("user",JSON.stringify(e))}))}},"favorite"):l.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/users/addtofav",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){m({type:"UPDATEFAV",payload:{favourites:e.favourites}}),localStorage.setItem("user",JSON.stringify(e))}))}},"favorite_border"),e.likes.includes(i._id)?l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/posts/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))}},"thumb_down"):l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/posts/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))}},"thumb_up"),l.a.createElement("h6",null,e.likes.length," likes. ",e.comments.length," comments"),l.a.createElement("h5",null,e.title),l.a.createElement("p",null,e.body),l.a.createElement("form",{onSubmit:function(t){var n,l;t.preventDefault(),n=t.target[0].value,l=e._id,fetch("/posts/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:l,text:n})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))}},l.a.createElement("input",{type:"text",placeholder:"comment on this post"})),e.comments.length>=1?l.a.createElement("h6",{key:e.comments[0]._id},l.a.createElement("span",{style:{fontWeight:"500"}},e.comments[0].postedBy.name," : ")," ",e.comments[0].text,e.comments[0].postedBy._id==i._id&&l.a.createElement("i",{className:"tiny material-icons",style:{color:"red",cursor:"pointer"},onClick:function(){var t,n;t=e._id,n=e.comments[0]._id,fetch("/posts/".concat(t,"/comments/").concat(n),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t),u.a.toast({html:"Comment Deleted Successfully",classes:"#43a047 green darken-1"})}))}},"delete")):"",e.comments.length>=1?l.a.createElement(s.b,{style:{paddingTop:"5px"},to:"/viewpost/"+e._id},"View all ",e.comments.length," comments"):""))}))):l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"indeterminate"})))},g=a(6),E=function(){var e=Object(i.f)(),t=Object(n.useRef)(null),a=Object(n.useState)([]),o=Object(r.a)(a,2),c=o[0],s=o[1],m=Object(n.useState)([]),d=Object(r.a)(m,2),p=d[0],f=d[1],h=Object(n.useContext)(k),E=h.state,y=h.dispatch,v=Object(n.useState)(""),b=Object(r.a)(v,2),j=b[0],N=b[1],w=Object(n.useState)(!1),O=Object(r.a)(w,2),S=O[0],_=O[1];Object(n.useEffect)((function(){u.a.Tabs.init(t.current,{swipeable:!0}),fetch("/posts/myposts",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){f(e)}))}),[]),Object(n.useEffect)((function(){fetch("/posts/myfav",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){s(e)}))}),[]),Object(n.useEffect)((function(){if(j){var e=new FormData;e.append("file",j),e.append("upload_preset","connect"),e.append("cloud_name","nithin"),fetch("https://api.cloudinary.com/v1_1/nithin/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){fetch("/users/updatepic",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({pic:e.url})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("user",JSON.stringify(Object(g.a)(Object(g.a)({},E),{},{pic:e.pic}))),y({type:"UPDATEPIC",payload:e.pic}),_(!1)}))})).catch((function(e){console.log(e)}))}}),[j]);return l.a.createElement(l.a.Fragment,null,S?l.a.createElement("div",null,l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"indeterminate"})),l.a.createElement("h5",{ClassName:"myfont",style:{textAlign:"center",marginTop:"100px"}},"Updating...")):l.a.createElement("div",{style:{maxWidth:"650px",margin:"0px auto"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 10px 0px 0px"}},l.a.createElement("div",null,l.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"50%"},src:E?E.pic:"loading.."})),l.a.createElement("div",null,l.a.createElement("h4",null,E?E.name:"Loading.."),l.a.createElement("h5",null,E?E.email:"Loading.."),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"108%"}},l.a.createElement("h6",null,p.length," posts"),l.a.createElement("h6",null,E?E.followers.length:"0"," followers"),l.a.createElement("h6",null,E?E.following.length:"0"," following")))),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn"},l.a.createElement("span",null,"Update"),l.a.createElement("input",{type:"file",onChange:function(e){return t=e.target.files[0],_(!0),void N(t);var t}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s12"},l.a.createElement("ul",{id:"tabs-swipe-demo",className:"tabs tabs-fixed-width",ref:t},l.a.createElement("li",{className:"tab col s3"},l.a.createElement("a",{href:"#test-swipe-1"},l.a.createElement("i",{className:"material-icons"},"favorite"))),l.a.createElement("li",{className:"tab col s3"},l.a.createElement("a",{className:"active",href:"#test-swipe-2"},l.a.createElement("i",{className:"material-icons"},"collections")))),l.a.createElement("div",{id:"test-swipe-2",className:"col s12"},l.a.createElement("div",{className:"gallery"},p&&p.length>0?p.map((function(t){return l.a.createElement("img",{key:t._id,className:"item",onClick:function(){return e.push("/viewpost/"+t._id)},alt:t.title,src:t.photo})})):l.a.createElement("h5",{style:{textAlign:"center"}},"Create a post to see it here"))),l.a.createElement("div",{id:"test-swipe-1",className:"col s12"},l.a.createElement("div",{className:"gallery"},c&&c.length>0?c.map((function(t){return l.a.createElement("img",{key:t._id,className:"item",onClick:function(){return e.push("/viewpost/"+t._id)},alt:t.title,src:t.photo})})):l.a.createElement("h5",{style:{textAlign:"center"}},"Add posts to favourites to see them here")))))))},y=function(){var e=Object(n.useContext)(k),t=(e.state,e.dispatch),a=Object(i.f)(),o=Object(n.useState)(""),c=Object(r.a)(o,2),m=c[0],d=c[1],p=Object(n.useState)(""),f=Object(r.a)(p,2),h=f[0],g=f[1];return l.a.createElement("div",{className:"mycard"},l.a.createElement("div",{className:"card auth-card"},l.a.createElement("h3",{className:"myfont"}," Connect "),l.a.createElement("input",{type:"text",placeholder:"Email",value:h,onChange:function(e){return g(e.target.value)},autoFocus:!0,required:!0}),l.a.createElement("input",{type:"password",placeholder:"Password",value:m,onChange:function(e){return d(e.target.value)},required:!0}),l.a.createElement("button",{className:"btn waves-effect waves-light",onClick:function(){fetch("users/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:m,email:h})}).then((function(e){return e.json()})).then((function(e){e.error?u.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),u.a.toast({html:"Login Success",classes:"#43a047 green darken-1"}),a.push("/"))})).catch((function(e){return console.log(e)}))}}," Login "),l.a.createElement("h6",null," ",l.a.createElement(s.b,{to:"/signup"}," Don't have an account ? "))))},v=function(){var e=Object(i.f)(),t=Object(n.useState)(""),a=Object(r.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(""),d=Object(r.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(r.a)(h,2),E=g[0],y=g[1],v=Object(n.useState)(""),b=Object(r.a)(v,2),j=b[0],N=b[1],w=Object(n.useState)(void 0),O=Object(r.a)(w,2),S=O[0],_=O[1];Object(n.useEffect)((function(){S&&C()}),[S]);var C=function(){fetch("users/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,password:p,email:E,pic:S})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(u.a.toast({html:t.message,classes:"#43a047 green darken-1"}),e.push("/signin"))})).catch((function(e){console.log(e)}))},x=function(){j?function(){var e=new FormData;e.append("file",j),e.append("upload_preset","connect"),e.append("cloud_name","nithin"),fetch("https://api.cloudinary.com/v1_1/nithin/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){_(e.url)})).catch((function(e){console.log(e)}))}():C()};return l.a.createElement("div",{className:"mycard"},l.a.createElement("div",{className:"card auth-card"},l.a.createElement("h3",{className:"myfont"}," Connect "),l.a.createElement("input",{type:"text",placeholder:"Name",value:o,onChange:function(e){return c(e.target.value)},autoFocus:!0,required:!0}),l.a.createElement("input",{type:"text",placeholder:"Email",value:E,onChange:function(e){return y(e.target.value)},required:!0}),l.a.createElement("input",{type:"password",placeholder:"Password",value:p,onChange:function(e){return f(e.target.value)},required:!0}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn"},l.a.createElement("span",null,"Upload Pic"),l.a.createElement("input",{type:"file",onChange:function(e){return N(e.target.files[0])}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement("button",{className:"btn waves-effect waves-light",onClick:function(){return x()}}," Register "),l.a.createElement("h6",null," ",l.a.createElement(s.b,{to:"/signin"}," Already have an account ? "))))},b=function(){var e=Object(i.f)(),t=Object(n.useState)(""),a=Object(r.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(""),m=Object(r.a)(s,2),d=m[0],p=m[1],f=Object(n.useState)(""),h=Object(r.a)(f,2),g=h[0],E=h[1],y=Object(n.useState)(""),v=Object(r.a)(y,2),b=v[0],j=v[1],N=Object(n.useState)(!1),w=Object(r.a)(N,2),O=w[0],S=w[1];Object(n.useEffect)((function(){b&&fetch("/posts/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:o,body:d,pic:b})}).then((function(e){return e.json()})).then((function(t){t.error?u.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(S(!1),u.a.toast({html:"Created post Successfully",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))}),[b]);return l.a.createElement(l.a.Fragment,null,O?l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"indeterminate"})):l.a.createElement("div",{className:"card input-field",style:{margin:"10px auto",maxWidth:"500px",padding:"20px",textAlign:"center"}},l.a.createElement("input",{type:"text",placeholder:"Title",value:o,onChange:function(e){return c(e.target.value)},autoFocus:!0}),l.a.createElement("input",{type:"text",placeholder:"Body",value:d,onChange:function(e){return p(e.target.value)}}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn"},l.a.createElement("span",null,"Upload Image"),l.a.createElement("input",{type:"file",onChange:function(e){return E(e.target.files[0])}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return function(){S(!0);var e=new FormData;e.append("file",g),e.append("upload_preset","connect"),e.append("cloud_name","nithin"),fetch("https://api.cloudinary.com/v1_1/nithin/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){j(e.url)})).catch((function(e){console.log(e)}))}()}}," Create Post ")))},j=a(23),N=function(){var e=Object(i.f)(),t=Object(n.useState)(null),a=Object(r.a)(t,2),o=a[0],c=a[1],s=Object(n.useContext)(k),m=s.state,u=s.dispatch,d=Object(i.g)().userId,p=Object(n.useState)(!m||!m.following.includes(d)),f=Object(r.a)(p,2),h=f[0],E=f[1];Object(n.useEffect)((function(){fetch("/users/".concat(d),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){c(e)}))}),[]);return l.a.createElement(l.a.Fragment,null,o?l.a.createElement("div",{style:{maxWidth:"650px",margin:"0px auto"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"1px solid gray"}},l.a.createElement("div",null,l.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"50%"},src:o.user.pic})),l.a.createElement("div",null,l.a.createElement("h4",null,o.user.name),l.a.createElement("h5",null,o.user.email),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"108%"}},l.a.createElement("h6",null,o.posts.length," posts"),l.a.createElement("h6",null,o.user.followers.length," followers"),l.a.createElement("h6",null,o.user.following.length," following")),h?l.a.createElement("button",{style:{margin:"10px"},className:"btn waves-effect waves-light",onClick:function(){fetch("/users/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:d})}).then((function(e){return e.json()})).then((function(e){u({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),c((function(t){return Object(g.a)(Object(g.a)({},t),{},{user:Object(g.a)(Object(g.a)({},t.user),{},{followers:[].concat(Object(j.a)(t.user.followers),[e._id])})})})),E(!1)}))}}," Follow "):l.a.createElement("button",{style:{margin:"10px"},className:"btn waves-effect waves-light",onClick:function(){fetch("/users/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unfollowId:d})}).then((function(e){return e.json()})).then((function(e){u({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),c((function(t){var a=t.user.followers.filter((function(t){return t!=e._id}));return Object(g.a)(Object(g.a)({},t),{},{user:Object(g.a)(Object(g.a)({},t.user),{},{followers:a})})})),E(!0)}))}}," unFollow "))),l.a.createElement("div",{className:"gallery"},o.posts.map((function(t){return l.a.createElement("img",{key:t._id,onClick:function(){return e.push("/viewpost/"+t._id)},className:"item",alt:t.title,src:t.photo})})))):l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"indeterminate"})))},w=function(){var e=Object(i.f)(),t=Object(n.useState)(null),a=Object(r.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(""),d=Object(r.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(""),g=Object(r.a)(h,2),E=g[0],y=g[1],v=Object(n.useContext)(k),b=v.state,j=(v.dispatch,Object(i.g)().postId);Object(n.useEffect)((function(){fetch("/posts/".concat(j),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){c(e),f(e.title),y(e.body)}))}),[]);return l.a.createElement(l.a.Fragment,null,o?o.postedBy._id.toString()===b._id?l.a.createElement("div",{className:"card home-card"},l.a.createElement("h5",{style:{padding:"5px"}},l.a.createElement(s.b,{to:o.postedBy._id==b._id?"/profile":"/profile/"+o.postedBy._id},l.a.createElement("img",{src:o.postedBy.pic,style:{width:"30px",height:"30px",borderRadius:"50%"}})," ",o.postedBy.name)," "),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:o.photo})),l.a.createElement("div",{className:"card-content"},l.a.createElement("h6",null,o.likes.length," likes  ",o.comments.length," comments"),l.a.createElement("br",null),l.a.createElement("label",{style:{fontSize:"17px"}}," Title: "),l.a.createElement("input",{type:"text",value:p,onChange:function(e){return f(e.target.value)},autoFocus:!0}),l.a.createElement("label",{style:{fontSize:"17px"}}," Body: "),l.a.createElement("input",{type:"text",value:E,onChange:function(e){return y(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){fetch("/posts/updatepost",{method:"put",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({postId:j,title:p,body:E})}).then((function(e){return e.json()})).then((function(t){u.a.toast({html:"Post updated Successfully",classes:"#43a047 green darken-1"}),e.push("/")})).catch((function(e){return console.log(e)}))}}," Update Post "),l.a.createElement("button",{style:{marginLeft:"20px"},className:"btn waves-effect waves-light #d32f2f red darken-2",onClick:function(){return e.push("/")}}," Cancel "))):e.push("/"):l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"indeterminate"})))},O=a(15),S=function(){var e=Object(n.useState)(void 0),t=Object(r.a)(e,2),a=t[0],o=t[1],c=Object(n.useContext)(k),i=c.state;c.dispatch;Object(n.useEffect)((function(){fetch("/posts/myfeed",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),o(e)}))}),[]);return l.a.createElement(l.a.Fragment,null,a?0==a.length?l.a.createElement("h5",{style:{textAlign:"center"}},"Follow someone to see their posts"):l.a.createElement("div",{className:"home"},a.map((function(e){return l.a.createElement("div",{className:"card home-card",key:e._id},l.a.createElement("div",null,l.a.createElement("div",{style:{float:"left",padding:"10px"}},l.a.createElement(s.b,{to:e.postedBy._id==i._id?"/profile":"/profile/"+e.postedBy._id},l.a.createElement("img",{src:e.postedBy.pic,style:{width:"30px",height:"30px",borderRadius:"50%"}}))),l.a.createElement("div",{style:{float:"left"}},l.a.createElement("div",{style:{fontSize:"1rem",lineHeight:"110%",padding:"2px",fontWeight:"600",marginTop:"5px"}},e.postedBy.name),l.a.createElement("div",{style:{fontSize:"1rem",lineHeight:"110%",padding:"2px"}},O(e.createdAt).utcOffset("+05:30").fromNow()," ",l.a.createElement("i",{className:"tiny material-icons"},"public"))),l.a.createElement("div",null,e.postedBy._id==i._id&&l.a.createElement("span",{style:{float:"right",marginTop:"10px"}},l.a.createElement(s.b,{style:{float:"right"},to:"/update-post/"+e._id},l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"}},"edit")),l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/posts/deletepost/".concat(t),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.filter((function(t){return t._id!==e._id}));o(t),u.a.toast({html:"Deleted Successfully",classes:"#43a047 green darken-1"})}))}},"delete")))),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:e.photo})),l.a.createElement("div",{className:"card-content"},l.a.createElement("i",{className:"material-icons",style:{color:"red"}},"favorite"),e.likes.includes(i._id)?l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/posts/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))}},"thumb_down"):l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var t;t=e._id,fetch("/posts/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))}},"thumb_up"),l.a.createElement("h6",null,e.likes.length," likes. ",e.comments.length," comments"),l.a.createElement("h5",null,e.title),l.a.createElement("p",null,e.body),l.a.createElement("form",{onSubmit:function(t){var n,l;t.preventDefault(),n=t.target[0].value,l=e._id,fetch("/posts/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:l,text:n})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t)})).catch((function(e){return console.log(e)}))}},l.a.createElement("input",{type:"text",placeholder:"comment on this post"})),e.comments.length>=1?l.a.createElement("h6",{key:e.comments[0]._id},l.a.createElement("span",{style:{fontWeight:"500"}},e.comments[0].postedBy.name," : ")," ",e.comments[0].text,e.comments[0].postedBy._id==i._id&&l.a.createElement("i",{className:"tiny material-icons",style:{color:"red",cursor:"pointer"},onClick:function(){var t,n;t=e._id,n=e.comments[0]._id,fetch("/posts/".concat(t,"/comments/").concat(n),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));o(t),u.a.toast({html:"Comment Deleted Successfully",classes:"#43a047 green darken-1"})}))}},"delete")):"",e.comments.length>=1?l.a.createElement(s.b,{style:{paddingTop:"5px"},to:"/viewpost/"+e._id},"View all ",e.comments.length," comments"):""))}))):l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"indeterminate"})))},_=a(15),C=function(){var e=Object(i.f)(),t=Object(n.useState)(null),a=Object(r.a)(t,2),o=a[0],c=a[1],m=Object(n.useContext)(k),d=m.state,p=(m.dispatch,Object(i.g)().postId);Object(n.useEffect)((function(){fetch("/posts/".concat(p),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){c(e)}))}),[]);return l.a.createElement(l.a.Fragment,null,o?l.a.createElement("div",{className:"card home-card",key:o._id},l.a.createElement("div",null,l.a.createElement("div",{style:{float:"left",padding:"10px"}},l.a.createElement(s.b,{to:o.postedBy._id==d._id?"/profile":"/profile/"+o.postedBy._id},l.a.createElement("img",{src:o.postedBy.pic,style:{width:"30px",height:"30px",borderRadius:"50%"}}))),l.a.createElement("div",{style:{float:"left"}},l.a.createElement("div",{style:{fontSize:"1rem",lineHeight:"110%",padding:"2px",fontWeight:"600",marginTop:"5px"}},o.postedBy.name),l.a.createElement("div",{style:{fontSize:"1rem",lineHeight:"110%",padding:"2px"}},_(o.createdAt).utcOffset("+05:30").fromNow()," ",l.a.createElement("i",{className:"tiny material-icons"},"public"))),l.a.createElement("div",null,o.postedBy._id==d._id&&l.a.createElement("span",{style:{float:"right",marginTop:"10px"}},l.a.createElement(s.b,{style:{float:"right"},to:"/update-post/"+o._id},l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"}},"edit")),l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){!function(t){fetch("/posts/deletepost/".concat(t),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(t){c(t),u.a.toast({html:"Deleted Successfully",classes:"#43a047 green darken-1"}),e.push("/")}))}(o._id)}},"delete")))),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:o.photo})),l.a.createElement("div",{className:"card-content"},l.a.createElement("i",{className:"material-icons",style:{color:"red"}},"favorite"),o.likes.includes(d._id)?l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var e;e=o._id,fetch("/posts/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){return console.log(e)}))}},"thumb_down"):l.a.createElement("i",{className:"material-icons",style:{cursor:"pointer"},onClick:function(){var e;e=o._id,fetch("/posts/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){return console.log(e)}))}},"thumb_up"),l.a.createElement("h6",null,o.likes.length," likes. ",o.comments.length," comments"),l.a.createElement("h5",null,o.title),l.a.createElement("p",null,o.body),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(e,t){fetch("/posts/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t,text:e})}).then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){return console.log(e)}))}(e.target[0].value,o._id)}},l.a.createElement("input",{type:"text",placeholder:"comment on this post",autoFocus:!0,required:!0})),o.comments.map((function(e){return l.a.createElement("h6",{key:e._id},l.a.createElement("span",{style:{fontWeight:"500"}},e.postedBy.name," : ")," ",e.text,e.postedBy._id==d._id&&l.a.createElement("i",{className:"tiny material-icons",style:{color:"red",cursor:"pointer"},onClick:function(){!function(e,t){fetch("/posts/".concat(e,"/comments/").concat(t),{method:"delete",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){c(e),u.a.toast({html:"Comment Deleted Successfully",classes:"#43a047 green darken-1"})}))}(o._id,e._id)}},"delete"))})))):l.a.createElement("div",{className:"progress"},l.a.createElement("div",{className:"indeterminate"})))},x=function(e,t){return"USER"==t.type?t.payload:"CLEAR"==t.type?null:"UPDATE"==t.type?Object(g.a)(Object(g.a)({},e),{},{followers:t.payload.followers,following:t.payload.following}):"UPDATEFAV"==t.type?Object(g.a)(Object(g.a)({},e),{},{favourites:t.payload.favourites}):"UPDATEPIC"==t.type?Object(g.a)(Object(g.a)({},e),{},{pic:t.payload}):e},k=Object(n.createContext)(),I=function(){var e=Object(i.f)(),t=Object(n.useContext)(k),a=(t.state,t.dispatch);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?a({type:"USER",payload:t}):e.push("/signin")}),[]),l.a.createElement(i.c,null,l.a.createElement(i.a,{exact:!0,path:"/"},l.a.createElement(h,null)),l.a.createElement(i.a,{path:"/signin"},l.a.createElement(y,null)),l.a.createElement(i.a,{path:"/signup"},l.a.createElement(v,null)),l.a.createElement(i.a,{exact:!0,path:"/profile"},l.a.createElement(E,null)),l.a.createElement(i.a,{path:"/create-post"},l.a.createElement(b,null)),l.a.createElement(i.a,{path:"/update-post/:postId"},l.a.createElement(w,null)),l.a.createElement(i.a,{path:"/myfeed"},l.a.createElement(S,null)),l.a.createElement(i.a,{path:"/viewpost/:postId"},l.a.createElement(C,null)),l.a.createElement(i.a,{path:"/profile/:userId"},l.a.createElement(N,null)))};var B=function(){var e=Object(n.useReducer)(x,null),t=Object(r.a)(e,2),a=t[0],o=t[1];return l.a.createElement(k.Provider,{value:{state:a,dispatch:o}},l.a.createElement(s.a,null,l.a.createElement(d,null),l.a.createElement(I,null),l.a.createElement(p,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.7cf24615.chunk.js.map